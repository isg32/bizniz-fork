<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale-1.0" />
        <title>
            {% block title %}{{ settings.PROJECT_NAME }}{% endblock %}
        </title>

        <!-- TailwindCSS with Typography Plugin -->
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ["Inter", "sans-serif"],
                        },
                    },
                },
            };
        </script>

        <!-- Google Fonts & Font Awesome Icons -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        />

        <!-- Custom Styles for animations and base elements -->
        <style>
            :root {
                /* User-facing colors (based on Tailwind defaults) */
                --bg-color: #f8fafc; /* body background */
                --bg-hero-color: #ffffff; /* hero background in light mode */
                --text-color: #1e293b; /* text-slate-900/800 */
                --text-secondary: #64748b; /* text-slate-500/600 */
                --bg-surface: #ffffff; /* bg-white (for cards, header, footer) */
                --border-color: #e2e8f0; /* border-slate-200 */
                --accent-color: #4f46e5; /* indigo-600 */
                --shadow-color: rgba(0, 0, 0, 0.1);
            }

            /* Dark Theme Overrides */
            [data-theme="dark"] {
                --bg-color: #1f2937; /* dark slate-900 (Main Body) */
                --bg-hero-color: #111827; /* darker slate-900 for Hero */
                --text-color: #f3f4f6; /* light gray */
                --text-secondary: #9ca3af; /* middle gray */
                --bg-surface: #1f2937; /* dark slate-800 */
                --border-color: #374151; /* dark slate-700 */
                --accent-color: #818cf8; /* light indigo */
                --shadow-color: rgba(0, 0, 0, 0.4);
            }
            body {
                font-family: "Inter", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                background-color: var(--bg-color);
                color: var(--text-color);
            }
            theme-surface {
                background-color: var(--bg-surface) !important;
                color: var(--text-color) !important;
                border-color: var(--border-color) !important;
            }
            .theme-border {
                border-color: var(--border-color) !important;
            }
            .theme-text-secondary {
                color: var(--text-secondary) !important;
            }
            .theme-shadow {
                box-shadow:
                    0 1px 3px 0 var(--shadow-color),
                    0 1px 2px -1px var(--shadow-color) !important;
            }

            /* For the button's hover state */
            .toggle-button:hover {
                background-color: var(--bg-surface);
            }

            .fade-in {
                animation: fadeIn 0.8s ease-out forwards;
            }
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>
    <body
        class="min-h-screen flex flex-col"
        x-data="{
        isDark: false,
        init() {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.setAttribute('data-theme', 'dark');
                this.isDark = true;
            } else {
                document.documentElement.removeAttribute('data-theme');
                this.isDark = false;
            }
        },
        toggleTheme() {
            this.isDark = !this.isDark;
            if (this.isDark) {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.theme = 'dark';
            } else {
                document.documentElement.removeAttribute('data-theme');
                localStorage.theme = 'light';
            }
        }
    }"
        style="background-color: var(--bg-color); color: var(--text-color)"
    >
        {% include 'partials/navbar.html' %}

        <main class="flex-grow w-full">{% block content %}{% endblock %}</main>

        {% include 'partials/footer.html' %}

        <!-- Alpine.js for interactivity -->
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
    </body>
</html>
